# Output-Style and Hook Removal in v2.0/v2.1

## What Changed

Task Orchestrator migrated through two architecture changes:

**v2.0**: Migrated from deprecated `.claude/output-styles/` system to Claude Code plugins with hooks
**v2.1**: Removed hooks in favor of orchestrator mode (system prompt)

## Impact

### Removed
- `.claude/output-styles/task-orchestrator.md` (deprecated by Anthropic)
- `.claude/plugins/task-orchestrator/hooks/` (redundant with orchestrator mode)
- `.claude/plugins/task-orchestrator/hooks-handlers/` (session-start hook)

### Added
- `.taskorchestrator/orchestrator-prompt.txt` - Comprehensive system prompt for orchestration mode

## Migration Steps

### For New Installations
1. Install via plugin marketplace:
   - `/plugin marketplace add ./` (local development)
   - `/plugin install task-orchestrator`
2. Run `setup_project` to initialize configuration (creates orchestrator-prompt.txt)
3. Enable orchestrator mode: `claude --system-prompt-file .taskorchestrator/orchestrator-prompt.txt`

### For Existing v1.x Users
1. Install plugin via `/plugin install task-orchestrator`
2. **Delete** `.claude/output-styles/task-orchestrator.md` (no longer used)
3. Run `setup_project` to initialize project configuration
4. Enable orchestrator mode: `claude --system-prompt-file .taskorchestrator/orchestrator-prompt.txt`

### For Existing v2.0 Users (with hooks)
1. Update plugin via `/plugin install task-orchestrator`
2. Hooks are automatically removed (no action needed)
3. Enable orchestrator mode: `claude --system-prompt-file .taskorchestrator/orchestrator-prompt.txt`

## Verification

After migration, verify setup:

1. Check orchestrator-prompt.txt exists: `ls .taskorchestrator/orchestrator-prompt.txt`
2. Start Claude with system prompt: `claude --system-prompt-file .taskorchestrator/orchestrator-prompt.txt`
3. Verify orchestration behavior (delegation patterns, routing, coordination)

## Benefits

**v2.0 Benefits** (output-styles → plugins):
- Standards compliant with official Claude Code plugin system
- Future-proof architecture
- Better maintenance and separation of concerns

**v2.1 Benefits** (hooks → orchestrator mode):
- No redundancy: Single source of truth for orchestration + communication style
- Token efficient: ~600 tokens saved (hooks removed)
- Simpler architecture: One comprehensive system prompt vs fragmented hooks
- Easier maintenance: Update one file instead of multiple

## Orchestrator Mode vs Direct Tools

**Orchestrator Mode** (Recommended):
- Comprehensive orchestration + communication style in system prompt
- Natural delegation patterns
- Automatic routing decisions
- Use: `claude --system-prompt-file .taskorchestrator/orchestrator-prompt.txt`

**Direct Tools** (Alternative):
- Use MCP tools directly (manage_container, query_container, etc.)
- Manual coordination
- No system prompt needed
- Good for learning or simple workflows

## Rollback

**Not recommended**: Both output-styles and hooks are deprecated/removed in favor of orchestrator mode. If you need custom behavior, edit `.taskorchestrator/orchestrator-prompt.txt` directly.
